YARTY
=====

Yare and Astounding Regression Tester: YARTY

For SBCL and CCL on Linux.

Status: There are several known issues including severe issues. See
BUGS file. These were discovered at a rate which suggests there are
probably still several severe unknown issues as well. I expect to fix
these issues during summer 2014.

YARTY is similar to other CL regression test libraries. The main
design points particular to YARTY are as follows. First, the returned
value from `RUN-TESTS` is immediately compatible with
CL-TEST-GRID. Second, there is only one test predicate \-\- `EACH`
\-\- and it only tests whether values are truthy. For other
predicates, e.g. `EQUAL`, the YARTY way is to include the `EQUAL` call
within an `EACH`. Third, automatic triggering of the test suite on
filesystem changes is included via `AUTORUN`.

`AUTORUN` is still experimental, but it is a primary goal of YARTY to
make it practical. It internally calls ASDF:TEST-SYSTEM to trigger the
tests. ASDF thus takes care of triggering any necessary recompilation.

Glossary
========

For Writing Tests
-----------------

DEFTEST:            Define a function that will be called during RUN-TESTS.
DEFTEST/EACH:       Like DEFTEST but wraps its body in an EACH.
EACH:               Test that each form returns truthy.
SIGNALS-A:          Returns true if body signals the condition.

For Running Tests
-----------------

RUN-TESTS:          Runs all the tests defined by DEFTEST in a given package.
AUTORUN:            Toggle whether asdf:test-system is automatically run when source is touched.
*HANDLE-ERRORS*:    t: handle errors in tests; nil: decline to handle. Default is t.
*HANDLE-AUTORUN-COMPILATION-ERRORS*:    During AUTORUN: t: handle compilation errors; nil: don't. Default is t.

For Managing Tests
------------------

CLEAR-TESTS:        Clear the tests for the given package, default to *package*.

Installation
============

YARTY depends on CL-FAM, which requires installation of the FAM or
Gamin library. (They are libraries for watching the file system for
changes. Install one through your system's package manager.)

As of May 2014 there are some CL-FAM fixes only available from my
fork, and YARTY is not distributed except from git. I recommend
installing Quicklisp then checking them both out in local-projects:

    cd ~/quicklisp/local-projects
    git clone https://github.com/m-n/yarty
    git clone https://github.com/m-n/cl-fam
    cd cl-fam
    git checkout -t origin/cffi-update # checkout the cl-fam branch with fixes
